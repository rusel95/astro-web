# Spec #64: Personal Eclipse Reports

## –ú–µ—Ç–∞
–ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–≤—ñ—Ç–∏ –ø—Ä–æ –≤–ø–ª–∏–≤ –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–∞—Ç–µ–º–Ω–µ–Ω—å –Ω–∞ –∂–∏—Ç—Ç—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

## –ë—ñ–∑–Ω–µ—Å-—Ü—ñ–Ω–Ω—ñ—Å—Ç—å
- **High perceived value**: –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—è ‚Äî –ø–æ—Ç—É–∂–Ω—ñ –∞—Å—Ç—Ä–æ-–ø–æ–¥—ñ—ó –∑ –º–∞—Å–æ–≤–∏–º —ñ–Ω—Ç–µ—Ä–µ—Å–æ–º
- **Urgency effect**: 2-3 –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è/—Ä—ñ–∫ ‚Üí –ø—Ä–∏—Ä–æ–¥–Ω—ñ —Å–ø–∞–π–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- **Monetization**: Astro.com –ø—Ä–æ–¥–∞—î Eclipse Reports —è–∫ premium –ø—Ä–æ–¥—É–∫—Ç
- **Engagement**: Email-–Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –¥–∏–∑–∞–π–Ω

### 1. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –∑–∞—Ç–µ–º–Ω–µ–Ω—å (0.5 –¥–Ω—è)
**–î–∂–µ—Ä–µ–ª–æ:** NASA Eclipse Data  
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** 
```typescript
interface Eclipse {
  id: string
  date: Date
  type: 'solar' | 'lunar'
  coordinates: {
    longitude: number
    latitude: number
  }
  zodiacSign: string
  degree: number
}
```

**Imlementation:**
- –°—Ç–≤–æ—Ä–∏—Ç–∏ `data/eclipses-2025-2030.json` –∑ –¥–∞–Ω–∏–º–∏ NASA
- Supabase —Ç–∞–±–ª–∏—Ü—è `eclipses` (–æ–ø—Ü—ñ–π–Ω–æ, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–∏–Ω–∞–º—ñ–∫–∞)

### 2. –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–ø–ª–∏–≤—É (1 –¥–µ–Ω—å)
**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –í–∏–∑–Ω–∞—á–∏—Ç–∏ –≤ —è–∫–∏–π –¥—ñ–º –Ω–∞—Ç–∞–ª—å–Ω–æ—ó –∫–∞—Ä—Ç–∏ –ø–æ–ø–∞–¥–∞—î –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è (–∑–∞ –≥—Ä–∞–¥—É—Å–∞–º–∏)
2. –ó–Ω–∞–π—Ç–∏ –∞—Å–ø–µ–∫—Ç–∏ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è –¥–æ –Ω–∞—Ç–∞–ª—å–Ω–∏—Ö –ø–ª–∞–Ω–µ—Ç (–æ—Ä–± ¬±5¬∞)
3. –û—Ü—ñ–Ω–∏—Ç–∏ —Å–∏–ª—É –≤–ø–ª–∏–≤—É:
   - Conjunction: –Ω–∞–π—Å–∏–ª—å–Ω—ñ—à–∏–π
   - Opposition/Square: –≤–∏–∫–ª–∏–∫–∏
   - Trine/Sextile: –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

**–ö–æ–¥:**
```typescript
function calculateEclipseImpact(
  eclipse: Eclipse,
  natalChart: NatalChart
): EclipseImpact {
  const house = findHouseForDegree(eclipse.degree, natalChart)
  const aspects = findAspectsToNatalPlanets(eclipse, natalChart)
  const strength = calculateStrength(aspects)
  
  return { house, aspects, strength, affectedAreas }
}
```

### 3. AI-–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—É (0.5 –¥–Ω—è)
**Prompt structure:**
```
–ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—è [–¢–ò–ü] —É –∑–Ω–∞–∫—É [–ó–ù–ê–ö] –≤ [–î–Ü–ú] –¥–æ–º—ñ.
–ê—Å–ø–µ–∫—Ç–∏: [–°–ü–ò–°–û–ö_–ê–°–ü–ï–ö–¢–Ü–í]

–ù–∞—Ç–∞–ª—å–Ω–∞ –∫–∞—Ä—Ç–∞:
- Sun: [–ü–û–ó–ò–¶–Ü–Ø]
- Moon: [–ü–û–ó–ò–¶–Ü–Ø]
- Ascendant: [–ü–û–ó–ò–¶–Ü–Ø]

–°—Ç–≤–æ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç (300-400 —Å–ª—ñ–≤):
1. –©–æ –æ–∑–Ω–∞—á–∞—î —Ü–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è –¥–ª—è –º–µ–Ω–µ
2. –Ø–∫—ñ —Å—Ñ–µ—Ä–∏ –∂–∏—Ç—Ç—è –∞–∫—Ç–∏–≤—ñ–∑—É—é—Ç—å—Å—è (–¥—ñ–º + –∞—Å–ø–µ–∫—Ç–∏)
3. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–æ—Ä–∞–¥–∏ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
4. –ß–∞—Å–æ–≤—ñ —Ä–∞–º–∫–∏ –≤–ø–ª–∏–≤—É (¬±3 –º—ñ—Å—è—Ü—ñ)

–¢–æ–Ω: –ø—ñ–¥—Ç—Ä–∏–º—É—é—á–∏–π, –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π, empowering.
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–≤—ñ—Ç—É:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "üåë –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—è [DATE] —É –≤–∞—à–æ–º—É [HOUSE] –¥–æ–º—ñ"
- –û–≥–ª—è–¥ (2-3 –∞–±–∑–∞—Ü–∏)
- –ê–∫—Ç–∏–≤—ñ–∑–æ–≤–∞–Ω—ñ —Å—Ñ–µ—Ä–∏ (bullet points)
- –ü–æ—Ä–∞–¥–∏ (3-5 –ø—É–Ω–∫—Ç—ñ–≤)
- –¢–∞–π–º–ª–∞–π–Ω –≤–ø–ª–∏–≤—É

### 4. Email-–Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è
**Timing:**
- –ó–∞ 1 —Ç–∏–∂–¥–µ–Ω—å –¥–æ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è
- –ó–∞ 1 –¥–µ–Ω—å –¥–æ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è
- –í –¥–µ–Ω—å –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è

**Email template:**
```
Subject: üåë –ó–∞ —Ç–∏–∂–¥–µ–Ω—å: –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—è —É –≤–∞—à–æ–º—É [HOUSE] –¥–æ–º—ñ

–ü—Ä–∏–≤—ñ—Ç [–ò–ú–Ø],

[DATE] –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è [TYPE] –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è, —è–∫–µ –∞–∫—Ç–∏–≤—ñ–∑—É—î –≤–∞—à [HOUSE] –¥—ñ–º ‚Äî —Å—Ñ–µ—Ä—É [AREAS].

üîÆ –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –≥–æ—Ç–æ–≤–∏–π: [LINK]

–û—Å–Ω–æ–≤–Ω—ñ —ñ–Ω—Å–∞–π—Ç–∏:
- [INSIGHT_1]
- [INSIGHT_2]
- [INSIGHT_3]

–ì–æ—Ç—É–π—Ç–µ—Å—è –∑–∞–≤—á–∞—Å–Ω–æ!
```

## UI/UX

### –ù–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞: `/eclipses`
**Layout:**
1. **Hero:** –ù–∞—Å—Ç—É–ø–Ω–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è + countdown
2. **Timeline:** –°–ø–∏—Å–æ–∫ –∑–∞—Ç–µ–º–Ω–µ–Ω—å 2025-2026
3. **–í–∞—à—ñ –∑–≤—ñ—Ç–∏:** –ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–≤—ñ—Ç–∏ (–¥–æ—Å—Ç—É–ø–Ω—ñ –ø—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó)

**–ö–æ–∂–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üåë –°–æ–Ω—è—á–Ω–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è           ‚îÇ
‚îÇ 14 –í–µ—Ä–µ—Å–Ω—è 2025                 ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ –í–∞—à 7 –¥—ñ–º: –í—ñ–¥–Ω–æ—Å–∏–Ω–∏            ‚îÇ
‚îÇ –°–∏–ª–∞ –≤–ø–ª–∏–≤—É: ‚óè‚óè‚óè‚óè‚óã              ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ [–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–≤—ñ—Ç] [–ù–∞–≥–∞–¥–∞—Ç–∏]  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Database Schema

```sql
-- –¢–∞–±–ª–∏—Ü—è –∑–∞—Ç–µ–º–Ω–µ–Ω—å (–º–æ–∂–Ω–∞ —è–∫ static JSON)
CREATE TABLE eclipses (
  id UUID PRIMARY KEY,
  date TIMESTAMP NOT NULL,
  type TEXT NOT NULL, -- 'solar' | 'lunar'
  zodiac_sign TEXT,
  degree NUMERIC,
  longitude NUMERIC,
  latitude NUMERIC
);

-- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –∑–≤—ñ—Ç–∏
CREATE TABLE eclipse_reports (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  eclipse_id UUID REFERENCES eclipses(id),
  house INTEGER,
  aspects JSONB,
  report_text TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  
  UNIQUE(user_id, eclipse_id)
);

-- Email –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è (queue)
CREATE TABLE eclipse_reminders (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  eclipse_id UUID REFERENCES eclipses(id),
  reminder_type TEXT, -- 'week_before' | 'day_before' | 'day_of'
  sent_at TIMESTAMP,
  
  INDEX(user_id, sent_at)
);
```

## Cron Jobs

**Daily check (00:00 UTC):**
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è –≤ –Ω–∞–π–±–ª–∏–∂—á—ñ 7/1 –¥–Ω—ñ–≤
// –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
// –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ emails

const upcomingEclipses = await getEclipsesInRange(
  new Date(),
  addDays(new Date(), 7)
)

for (const eclipse of upcomingEclipses) {
  const users = await getAllActiveUsers()
  for (const user of users) {
    await generateAndSendReport(user, eclipse)
  }
}
```

## Monetization Strategy

**Freemium:**
- Free: –±–∞—á–∞—Ç—å –¥–∞—Ç–∏ –∑–∞—Ç–µ–º–Ω–µ–Ω—å + –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å
- Premium (‚Ç¥99/–º—ñ—Å): –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–≤—ñ—Ç–∏ + email-–Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è

**Pay-per-report:**
- –û–∫—Ä–µ–º–∏–π –∑–≤—ñ—Ç: ‚Ç¥149
- –í—Å—ñ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è —Ä–æ–∫—É: ‚Ç¥499

## Success Metrics

- **Email open rate:** >50% (–≤–∏—Å–æ–∫–∏–π —ñ–Ω—Ç–µ—Ä–µ—Å –¥–æ –∑–∞—Ç–µ–º–Ω–µ–Ω—å)
- **Report views:** >60% –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–µ—Ä–µ–≥–ª—è–¥–∞—é—Ç—å –∑–≤—ñ—Ç
- **Premium conversion:** 5-8% (urgency + perceived value)
- **Retention spike:** +30% –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≤ —Ç–∏–∂–¥–µ–Ω—å –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è

## –†–µ—Ñ–µ—Ä–µ–Ω–æ—Å—Ç—ñ

- **Astro.com Eclipse Reports:** [astro.com/horoscopes/eclipse](https://www.astro.com)
- **NASA Eclipse Data:** [eclipse.gsfc.nasa.gov](https://eclipse.gsfc.nasa.gov)
- **CafeAstrology Eclipses:** –§–æ—Ä–º–∞—Ç –∑–≤—ñ—Ç—ñ–≤ —Ç–∞ interpretations

## Implementation Timeline

**–î–µ–Ω—å 1:**
- [ ] –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç–∞ –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ NASA (2025-2030)
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `calculateEclipseImpact()`
- [ ] –ë–∞–∑–æ–≤–∞ AI-–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—É

**–î–µ–Ω—å 2:**
- [ ] UI: —Å—Ç–æ—Ä—ñ–Ω–∫–∞ `/eclipses` + timeline
- [ ] Email templates
- [ ] Cron job –¥–ª—è –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å
- [ ] Testing –∑ –∫—ñ–ª—å–∫–æ–º–∞ users

## Dependencies

- Swiss Ephemeris: —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ houses
- OpenAI API: –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—ñ–≤
- Email service: SendGrid / Resend
- Cron: Vercel Cron / Railway Cron

## –†–∏–∑–∏–∫–∏ —Ç–∞ –º—ñtigations

**–†–∏–∑–∏–∫:** –ù–µ—Ç–æ—á–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –≤–ø–ª–∏–≤—É  
**Mitigation:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ —Ñ–æ—Ä–º—É–ª–∏ –∑ Astro.com, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –≤—ñ–¥–æ–º–∏–º–∏ —á–∞—Ä—Ç–∞–º–∏

**–†–∏–∑–∏–∫:** Low engagement –º—ñ–∂ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è–º–∏  
**Mitigation:** –î–æ–¥–∞—Ç–∏ "–ê—Ä—Ö—ñ–≤ –∑–≤—ñ—Ç—ñ–≤", blog posts –ø—Ä–æ –º–∏–Ω—É–ª—ñ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è

**–†–∏–∑–∏–∫:** Spam-—Å–∫–∞—Ä–≥–∏ –Ω–∞ emails  
**Mitigation:** –ß—ñ—Ç–∫–∏–π opt-in, –ª–µ–≥–∫–∏–π unsubscribe, —è–∫—ñ—Å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç

## Open Questions

1. –ß–∏ –≤–∫–ª—é—á–∞—Ç–∏ —ñ—Å—Ç–æ—Ä–∏—á–Ω—ñ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è (–¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø–∞—Ç—Ç–µ—Ä–Ω—ñ–≤)?
2. –ß–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω Social sharing –∑–≤—ñ—Ç—ñ–≤?
3. –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è —á–∞—Å–æ–≤–∏—Ö –∑–æ–Ω –¥–ª—è email-–Ω–∞–≥–∞–¥—É–≤–∞–Ω—å?

---

**–ì–æ—Ç–æ–≤–∏–π –¥–æ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó:** ‚úÖ  
**–ü–æ—Ç—Ä–µ–±—É—î review:** @ruslan  
**Estimated effort:** 2 –¥–Ω—ñ (1 —Ä–æ–∑—Ä–æ–±–Ω–∏–∫)
