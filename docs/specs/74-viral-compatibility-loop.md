# Spec: #74 Viral Loop ‚Äî Compatibility Check

## –ú–µ—Ç–∞
–°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ—Ä—É—Å–Ω—É –º–µ—Ö–∞–Ω—ñ–∫—É –∑–∞–ø—Ä–æ—à–µ–Ω—å —á–µ—Ä–µ–∑ compatibility checks –¥–ª—è –æ—Ä–≥–∞–Ω—ñ—á–Ω–æ–≥–æ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ—ó –±–∞–∑–∏ (K-factor > 1).

## –ë—ñ–∑–Ω–µ—Å-–æ–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è
- **Viral Growth:** Co-Star –¥–æ—Å—è–≥ 5M+ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —á–µ—Ä–µ–∑ compatibility feature
- **K-factor > 1:** –ö–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ø—Ä–æ—à—É—î 2-3+ –¥—Ä—É–∑—ñ–≤
- **2x Conversion:** –û–±–∏–¥–≤–∞ —É—á–∞—Å–Ω–∏–∫–∏ —Å—Ç–∞—é—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- **Emotional Hook:** –°—Ç–æ—Å—É–Ω–∫–∏ ‚Äî –Ω–∞–π—Å–∏–ª—å–Ω—ñ—à–∞ –º–æ—Ç–∏–≤–∞—Ü—ñ—è engagement
- **Zero CAC:** –û—Ä–≥–∞–Ω—ñ—á–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –±–µ–∑ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç—É

## User Flow

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –Ü—Å–Ω—É—é—á–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ø—Ä–æ—à—É—î
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞ dashboard –Ω–∞—Ç–∏—Å–∫–∞—î "–ü–µ—Ä–µ–≤—ñ—Ä —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ –¥—Ä—É–≥–æ–º"
2. –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä—É—î unique invite link: `astro-web.com/invite/ABC123`
3. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –¥—ñ–ª–∏—Ç—å—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º (Telegram/WhatsApp/Instagram)
4. –î—Ä—É–≥ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º ‚Üí –±–∞—á–∏—Ç—å "–û–ª–µ–Ω–∞ –∑–∞–ø—Ä–æ—à—É—î –≤–∞—Å –¥—ñ–∑–Ω–∞—Ç–∏—Å—å –≤–∞—à—É —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å!"
5. –î—Ä—É–≥ –≤–≤–æ–¥–∏—Ç—å —Å–≤–æ—ó –¥–∞–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è ‚Üí —Ä–µ—î—Å—Ç—Ä—É—î—Ç—å—Å—è
6. –°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î synastry chart
7. **–û–±–∏–¥–≤–∞** –æ—Ç—Ä–∏–º—É—é—Ç—å compatibility –∑–≤—ñ—Ç –∑ score —Ç–∞ insights
8. Beautiful share card: "–ú–∏ –∑ –û–ª–µ–Ω–æ—é 87% —Å—É–º—ñ—Å–Ω—ñ! üíï"

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –ù–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ø—Ä–æ—à—É—î –Ω–∞–∑–∞–¥
1. –ù–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –±–∞—á–∏—Ç—å "–•–æ—á–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ –∫–∏–º–æ—Å—å —ñ—â–µ?"
2. –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è ‚Üí exponential growth

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### 1. Database Schema (Supabase)

```sql
-- Invites table
CREATE TABLE invites (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  code VARCHAR(12) UNIQUE NOT NULL, -- ABC123
  inviter_id UUID REFERENCES users(id) ON DELETE CASCADE,
  invitee_id UUID REFERENCES users(id) ON DELETE SET NULL,
  status VARCHAR(20) DEFAULT 'pending', -- pending, accepted, expired
  created_at TIMESTAMPTZ DEFAULT NOW(),
  accepted_at TIMESTAMPTZ,
  expires_at TIMESTAMPTZ DEFAULT NOW() + INTERVAL '30 days'
);

CREATE INDEX idx_invites_code ON invites(code);
CREATE INDEX idx_invites_inviter ON invites(inviter_id);

-- Compatibility reports table
CREATE TABLE compatibility_reports (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user1_id UUID REFERENCES users(id) ON DELETE CASCADE,
  user2_id UUID REFERENCES users(id) ON DELETE CASCADE,
  invite_id UUID REFERENCES invites(id) ON DELETE SET NULL,
  compatibility_score INT CHECK (compatibility_score >= 0 AND compatibility_score <= 100),
  synastry_data JSONB NOT NULL, -- aspects, composite positions
  ai_interpretation TEXT,
  share_image_url TEXT, -- generated OG image URL
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user1_id, user2_id)
);

CREATE INDEX idx_compatibility_user1 ON compatibility_reports(user1_id);
CREATE INDEX idx_compatibility_user2 ON compatibility_reports(user2_id);
```

### 2. Invite Code Generation

```typescript
// /lib/invites.ts
import { nanoid } from 'nanoid'

export async function createInvite(inviterId: string): Promise<string> {
  const code = nanoid(8).toUpperCase() // ABC12345
  
  await supabase.from('invites').insert({
    code,
    inviter_id: inviterId,
    expires_at: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 days
  })
  
  return code
}

export function getInviteUrl(code: string): string {
  return `${process.env.NEXT_PUBLIC_BASE_URL}/invite/${code}`
}
```

### 3. Synastry Calculation

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞—Ç–∞–ª—å–Ω—ñ —á–∞—Ä—Ç–∏ –æ–±–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
2. –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ aspects –º—ñ–∂ –ø–ª–∞–Ω–µ—Ç–∞–º–∏:
   - Conjunction (0¬∞, orb ¬±8¬∞)
   - Trine (120¬∞, orb ¬±8¬∞)
   - Square (90¬∞, orb ¬±7¬∞)
   - Opposition (180¬∞, orb ¬±8¬∞)
   - Sextile (60¬∞, orb ¬±6¬∞)
3. –û—Ü—ñ–Ω–∏—Ç–∏ –∫–æ–∂–µ–Ω –∞—Å–ø–µ–∫—Ç:
   - Harmonious: Trine, Sextile (+points)
   - Challenging: Square, Opposition (-points)
   - Neutral: Conjunction (context-dependent)

**–û—Å–æ–±–ª–∏–≤–æ –≤–∞–∂–ª–∏–≤—ñ –∞—Å–ø–µ–∫—Ç–∏:**
- Venus-Mars (—Ä–æ–º–∞–Ω—Ç–∏–∫–∞)
- Moon-Moon (–µ–º–æ—Ü—ñ–π–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å)
- Sun-Moon (personality fit)
- Mercury-Mercury (–∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è)
- Ascendant-Sun/Moon (–ø–µ—Ä—à–µ –≤—Ä–∞–∂–µ–Ω–Ω—è)

**Compatibility Score Formula:**
```typescript
function calculateCompatibilityScore(aspects: Aspect[]): number {
  let score = 50 // baseline
  
  aspects.forEach(aspect => {
    const weight = PLANET_WEIGHTS[aspect.planet1][aspect.planet2] || 1
    
    if (aspect.type === 'trine' || aspect.type === 'sextile') {
      score += weight * 5
    } else if (aspect.type === 'square' || aspect.type === 'opposition') {
      score -= weight * 3
    } else if (aspect.type === 'conjunction') {
      // Context-dependent: Venus-Mars conjunction = positive
      if (isPositiveConjunction(aspect)) score += weight * 4
      else score -= weight * 2
    }
  })
  
  return Math.max(0, Math.min(100, score))
}

const PLANET_WEIGHTS = {
  Venus: { Mars: 3, Moon: 2.5, Sun: 2 },
  Moon: { Moon: 3, Sun: 2.5, Mercury: 2 },
  Sun: { Moon: 2.5, Ascendant: 2 },
  // ...
}
```

### 4. AI Interpretation

**Prompt Template:**
```
–¢–∏ ‚Äî –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –∞—Å—Ç—Ä–æ–ª–æ–≥. –°—Ç–≤–æ—Ä–∏ –∑–≤—ñ—Ç —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –¥–ª—è –¥–≤–æ—Ö –ª—é–¥–µ–π:

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á 1: {{name1}}
{{chart1_summary}}

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á 2: {{name2}}
{{chart2_summary}}

Synastry –∞—Å–ø–µ–∫—Ç–∏:
{{aspects_list}}

Compatibility Score: {{score}}%

–°—Ç–≤–æ—Ä–∏ –∑–≤—ñ—Ç —É —Ñ–æ—Ä–º–∞—Ç—ñ:

1. **–ó–∞–≥–∞–ª—å–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫** (2-3 —Ä–µ—á–µ–Ω–Ω—è): –ß–∏ —Å—É–º—ñ—Å–Ω—ñ —Ü—ñ –ª—é–¥–∏?

2. **–°–∏–ª—å–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏** (3-4 –ø—É–Ω–∫—Ç–∏):
   - –©–æ –ø—Ä–∞—Ü—é—î –¥–æ–±—Ä–µ —É –≤—ñ–¥–Ω–æ—Å–∏–Ω–∞—Ö
   - –ù–∞ —á–æ–º—É –±–∞–∑—É—î—Ç—å—Å—è –∑–≤'—è–∑–æ–∫

3. **–í–∏–∫–ª–∏–∫–∏** (2-3 –ø—É–Ω–∫—Ç–∏):
   - –î–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —Ç—Ä—É–¥–Ω–æ—â—ñ
   - –©–æ –ø–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏

4. **–ü–æ—Ä–∞–¥–∏** (2-3 –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó)

–°—Ç–∏–ª—å: —á–µ—Å–Ω–∏–π, –ø—ñ–¥—Ç—Ä–∏–º—É—é—á–∏–π, –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π. –£–Ω–∏–∫–∞–π –∫–ª—ñ—à–µ.
–ú–æ–≤–∞: —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞.
```

**–ü—Ä–∏–∫–ª–∞–¥ output:**
```
üíï Compatibility: 87%

–í–∏ –∑ –û–ª–µ–Ω–æ—é –º–∞—î—Ç–µ –≤–∏—Å–æ–∫—É —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å! –í–µ–Ω–µ—Ä–∞ —É —Ç—Ä–∏–≥–æ–Ω—ñ –¥–æ –ú–∞—Ä—Å–∞ —Å—Ç–≤–æ—Ä—é—î –ø—Ä–∏—Ä–æ–¥–Ω—É —Ä–æ–º–∞–Ω—Ç–∏—á–Ω—É —Ö—ñ–º—ñ—é, –∞ –≤–∞—à—ñ –ú—ñ—Å—è—Ü—ñ –≤ –≥–∞—Ä–º–æ–Ω—ñ–π–Ω–æ–º—É —Å–µ–∫—Å—Ç–∏–ª—ñ –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –µ–º–æ—Ü—ñ–π–Ω–µ –ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è.

‚ú® –°–∏–ª—å–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏:
- –ü—Ä–∏—Ä–æ–¥–Ω–∞ —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–∞ –ø—Ä–∏—Ç—è–≥–∞–ª—å–Ω—ñ—Å—Ç—å (–í–µ–Ω–µ—Ä–∞-–ú–∞—Ä—Å —Ç—Ä–∏–≥–æ–Ω)
- –õ–µ–≥–∫–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –±–µ–∑ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ (–ú–µ—Ä–∫—É—Ä—ñ–π-–ú–µ—Ä–∫—É—Ä—ñ–π —Å–µ–∫—Å—Ç–∏–ª—å)
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∞–º–±—ñ—Ü—ñ–π –æ–¥–∏–Ω –æ–¥–Ω–æ–≥–æ (–°–æ–Ω—Ü–µ-–Æ–ø—ñ—Ç–µ—Ä —Ç—Ä–∏–≥–æ–Ω)

‚ö†Ô∏è –í–∏–∫–ª–∏–∫–∏:
- –Ü–Ω–æ–¥—ñ —Ä—ñ–∑–Ω—ñ —Ç–µ–º–ø–∏ ‚Äî –æ–¥–∏–Ω —Ö–æ—á–µ –¥—ñ—è—Ç–∏ —à–≤–∏–¥—à–µ (–ú–∞—Ä—Å –∫–≤–∞–¥—Ä–∞—Ç –°–∞—Ç—É—Ä–Ω)
- –ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–∞–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç—ñ—Ä –¥–ª—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ—Å—Ç—ñ (–ú—ñ—Å—è—Ü—å –æ–ø–æ–∑–∏—Ü—ñ—è –£—Ä–∞–Ω)

üí° –ü–æ—Ä–∞–¥–∏:
- –û–±–≥–æ–≤–æ—Ä—é–π—Ç–µ –ø–ª–∞–Ω–∏ –≤—ñ–¥–∫—Ä–∏—Ç–æ ‚Äî –≤–∞—à –ú–µ—Ä–∫—É—Ä—ñ–π —Ü–µ –ª—é–±–∏—Ç—å
- –î–∞–≤–∞–π—Ç–µ —á–∞—Å –Ω–∞ —Å–∞–º–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å ‚Äî —Ü–µ –∑–º—ñ—Ü–Ω—é—î —Å—Ç–æ—Å—É–Ω–∫–∏
```

### 5. UI Components

#### A. Dashboard: Invite Button
```tsx
// components/dashboard/CompatibilityInvite.tsx
export function CompatibilityInvite() {
  const [inviteUrl, setInviteUrl] = useState<string | null>(null)
  
  async function handleCreateInvite() {
    const code = await createInvite(user.id)
    const url = getInviteUrl(code)
    setInviteUrl(url)
  }
  
  return (
    <Card className="p-6">
      <h3 className="text-xl font-semibold mb-2">
        üíï –ü–µ—Ä–µ–≤—ñ—Ä —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ –¥—Ä—É–≥–æ–º
      </h3>
      <p className="text-muted-foreground mb-4">
        –ó–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–≥–∞ –∞–±–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ —ñ –¥—ñ–∑–Ω–∞–π—Ç–µ—Å—å –≤–∞—à—É –∞—Å—Ç—Ä–æ–ª–æ–≥—ñ—á–Ω—É —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å
      </p>
      
      {!inviteUrl ? (
        <Button onClick={handleCreateInvite}>
          –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è
        </Button>
      ) : (
        <div className="space-y-3">
          <Input value={inviteUrl} readOnly />
          <div className="flex gap-2">
            <Button onClick={() => copyToClipboard(inviteUrl)}>
              –ö–æ–ø—ñ—é–≤–∞—Ç–∏
            </Button>
            <Button onClick={() => shareToTelegram(inviteUrl)}>
              Telegram
            </Button>
            <Button onClick={() => shareToWhatsApp(inviteUrl)}>
              WhatsApp
            </Button>
          </div>
        </div>
      )}
    </Card>
  )
}
```

#### B. Invite Landing Page
```tsx
// app/invite/[code]/page.tsx
export default async function InvitePage({ params }: { params: { code: string } }) {
  const invite = await getInviteByCode(params.code)
  
  if (!invite || invite.status === 'expired') {
    return <InviteExpired />
  }
  
  const inviter = await getUserById(invite.inviter_id)
  
  return (
    <div className="container max-w-2xl py-12">
      <Card className="p-8 text-center">
        <Avatar className="w-20 h-20 mx-auto mb-4">
          {inviter.name[0]}
        </Avatar>
        
        <h1 className="text-3xl font-bold mb-2">
          {inviter.name} –∑–∞–ø—Ä–æ—à—É—î –≤–∞—Å!
        </h1>
        
        <p className="text-xl text-muted-foreground mb-6">
          –î—ñ–∑–Ω–∞–π—Ç–µ—Å—å –≤–∞—à—É –∞—Å—Ç—Ä–æ–ª–æ–≥—ñ—á–Ω—É —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å üí´
        </p>
        
        <BirthDataForm 
          onSubmit={(data) => handleInviteAccept(invite.code, data)}
        />
      </Card>
    </div>
  )
}
```

#### C. Compatibility Report Page
```tsx
// app/compatibility/[id]/page.tsx
export default async function CompatibilityReportPage({ params }: { params: { id: string } }) {
  const report = await getCompatibilityReport(params.id)
  
  return (
    <div className="container max-w-4xl py-12">
      <CompatibilityHeader 
        user1={report.user1}
        user2={report.user2}
        score={report.compatibility_score}
      />
      
      <CompatibilityGauge score={report.compatibility_score} />
      
      <AIInterpretation text={report.ai_interpretation} />
      
      <SynastryAspectsTable aspects={report.synastry_data.aspects} />
      
      <ShareCard 
        imageUrl={report.share_image_url}
        text={`–ú–∏ –∑ ${report.user2.name} ${report.compatibility_score}% —Å—É–º—ñ—Å–Ω—ñ!`}
      />
    </div>
  )
}
```

### 6. Share Card Generation

**OG Image (Open Graph):**
```tsx
// app/api/og/compatibility/route.tsx
import { ImageResponse } from 'next/og'

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url)
  const user1 = searchParams.get('user1')
  const user2 = searchParams.get('user2')
  const score = searchParams.get('score')
  
  return new ImageResponse(
    (
      <div style={{
        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        width: '100%',
        height: '100%',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        color: 'white',
        fontFamily: 'Inter',
      }}>
        <div style={{ fontSize: 72, fontWeight: 'bold', marginBottom: 20 }}>
          {score}% üíï
        </div>
        <div style={{ fontSize: 36 }}>
          {user1} & {user2}
        </div>
        <div style={{ fontSize: 24, opacity: 0.8, marginTop: 20 }}>
          –ê—Å—Ç—Ä–æ–ª–æ–≥—ñ—á–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å
        </div>
      </div>
    ),
    {
      width: 1200,
      height: 630,
    }
  )
}
```

### 7. Analytics Events

```typescript
// Track key events
analytics.track('invite_created', {
  inviter_id: user.id,
  invite_code: code,
})

analytics.track('invite_accepted', {
  inviter_id: invite.inviter_id,
  invitee_id: newUser.id,
  invite_code: code,
})

analytics.track('compatibility_viewed', {
  report_id: report.id,
  score: report.compatibility_score,
})

analytics.track('compatibility_shared', {
  report_id: report.id,
  platform: 'telegram', // or 'whatsapp', 'instagram'
})
```

**K-factor Calculation:**
```sql
-- Weekly K-factor
SELECT 
  DATE_TRUNC('week', created_at) as week,
  COUNT(DISTINCT invitee_id) * 1.0 / COUNT(DISTINCT inviter_id) as k_factor
FROM invites
WHERE status = 'accepted'
GROUP BY week
ORDER BY week DESC;
```

## Implementation Plan

### –î–µ–Ω—å 1: Backend + Core Logic
- [ ] Supabase tables: invites, compatibility_reports
- [ ] Invite code generation + validation
- [ ] Synastry calculation algorithm
- [ ] Compatibility score formula
- [ ] API routes: POST /api/invites, POST /api/compatibility

### –î–µ–Ω—å 2: UI + Polish
- [ ] Dashboard invite button + share modal
- [ ] /invite/[code] landing page
- [ ] /compatibility/[id] report page
- [ ] OG image generation
- [ ] Share buttons (Telegram, WhatsApp, copy)
- [ ] Analytics integration

### –î–µ–Ω—å 3 (optional): Advanced
- [ ] Email notifications (invite sent, compatibility ready)
- [ ] Invite history page
- [ ] Composite chart visualization
- [ ] Premium upsell CTAs

## Success Metrics

**Week 1:**
- [ ] 50+ invites —Å—Ç–≤–æ—Ä–µ–Ω–æ
- [ ] 30%+ invite acceptance rate
- [ ] 0 critical bugs

**Month 1:**
- [ ] K-factor > 1.0 (exponential growth)
- [ ] 200+ compatibility reports
- [ ] 20%+ share rate

**Month 3:**
- [ ] K-factor > 1.5
- [ ] Invites = #1 acquisition channel
- [ ] 50%+ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Å—Ç–≤–æ—Ä–∏–ª–∏ —Ö–æ—á–∞ –± 1 invite

## Risks & Mitigations

**Risk 1: Low invite acceptance**
- Mitigation: A/B test landing page copy
- Personalized message from inviter
- Show preview of what they'll get

**Risk 2: Inaccurate synastry**
- Mitigation: Validate –ø—Ä–æ—Ç–∏ CafeAstrology
- Expert astrologer review
- User feedback loop

**Risk 3: Privacy concerns**
- Mitigation: Clear consent flow
- Option to make report private
- Delete data on request

**Risk 4: Spam/abuse**
- Mitigation: Rate limit (5 invites/day)
- Expire invites after 30 days
- Report/block mechanism

## Open Questions

1. **Synastry library:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á—É –∞–±–æ –Ω–∞–ø–∏—Å–∞—Ç–∏ —Å–≤–æ—é?
2. **Privacy:** –ß–∏ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø–æ–≤–Ω–∏–π —á–∞—Ä—Ç –¥—Ä—É–≥–∞ —á–∏ —Ç—ñ–ª—å–∫–∏ compatibility?
3. **Monetization:** Free –¥–ª—è –≤—Å—ñ—Ö —á–∏ freemium (–¥–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç = Premium)?
4. **Composite chart:** –î–æ–¥–∞—Ç–∏ –≤ v1 —á–∏ v2?

## Dependencies

- –ù–∞—Ç–∞–ª—å–Ω–∏–π —á–∞—Ä—Ç —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ (–≤–∂–µ —î)
- User authentication (–≤–∂–µ —î)
- Share functionality (OG images)

## Out of Scope (v2)

- Composite chart (–æ–∫—Ä–µ–º–∞ –∫–∞—Ä—Ç–∞ –≤—ñ–¥–Ω–æ—Å–∏–Ω)
- Group compatibility (3+ –ª—é–¥–µ–π)
- Compatibility timeline (—è–∫ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∑ —á–∞—Å–æ–º)
- AI chat –ø—Ä–æ —Å—Ç–æ—Å—É–Ω–∫–∏
- Dating matching algorithm

---

**–ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–æ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó:** –ü—ñ—Å–ª—è approval
**Estimated effort:** 2-3 –¥–Ω—ñ
**Priority:** CRITICAL (viral growth mechanism)
